{
  "version": 3,
  "sources": [
    "video.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "###\n * Federated Wiki : Video Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-video/blob/master/LICENSE.txt\n###\n\nparse = (text='') ->\n  result = {}\n  for line in text.split /\\r\\n?|\\n/\n    if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = ''\n      result.key = args[2]\n    else if args = line.match /^\\s*([A-Z0-9]{3,})\\s+([A-Z\\,]+)\\s+([\\w\\.\\-\\/+0-9]+)\\s*$/\n      result.player = args[1]\n      result.options = args[2]\n      result.key = args[3]\n    else if args = line.match /^\\s*(HTML5)\\s+([A-Za-z0-9]+)\\s+(.+)\\s*$/\n      try url = new UrlAdapter(args[3])\n      catch err then console.log \"failed to parse URL: #{err}\"\n      result.player = args[1]\n      result.options = args[2]\n      result.key = url.href\n    else\n      result.caption ||= ' '\n      result.caption += line + ' '\n  result\n\nembed = ({player, options, key}) ->\n  switch player\n    when 'YOUTUBE'\n      if options.toUpperCase() is \"PLAYLIST\"\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/videoseries?list=#{key}\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n      else\n        \"\"\"\n          <iframe\n            width=\"420\" height=\"236\"\n            src=\"https://www.youtube-nocookie.com/embed/#{key}?rel=0\"\n            frameborder=\"0\"\n            allowfullscreen>\n          </iframe>\n        \"\"\"\n    when 'VIMEO'\n      \"\"\"\n        <iframe\n          src=\"https://player.vimeo.com/video/#{key}?title=0&amp;byline=0&amp;portrait=0\"\n          width=\"420\" height=\"236\"\n          frameborder=\"0\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'ARCHIVE'\n      \"\"\"\n        <iframe\n          src=\"https://archive.org/embed/#{key}\"\n          width=\"420\" height=\"315\"\n          frameborder=\"0\" webkitallowfullscreen=\"true\" mozallowfullscreen=\"true\"\n          allowfullscreen>\n        </iframe>\n      \"\"\"\n    when 'TED'\n      \"\"\"\n        <iframe\n          src=\"https://embed-ssl.ted.com/talks/#{key}.html\"\n          width=\"420\" height=\"300\"\n          frameborder=\"0\" scrolling=\"no\" webkitAllowFullScreen mozallowfullscreen\n          allowFullScreen>\n        </iframe>\n      \"\"\"\n    when 'TEDX'\n      \"\"\"\n        <iframe\n          src=\"http://tedxtalks.ted.com/video/#{key}/player?layout=&amp;read_more=1\"\n          width=\"420\" height=\"300\"\n          frameborder=\"0\" scrolling=\"no\">\n        </iframe>\n      \"\"\"\n    when 'CHANNEL9'\n      \"\"\"\n        <iframe\n          src=\"https://channel9.msdn.com/#{key}/player\"\n          width=\"420\" height=\"236\"\n          allowFullScreen frameBorder=\"0\">\n        </iframe>\n      \"\"\"\n    when 'HTML5'\n      \"\"\"\n        <video controls width=\"100%\">\n          <source src=\"#{key}\"\n                  type=\"video/#{options}\">\n        </video>\n      \"\"\"\n    else\n      \"(unknown player)\"\n\nemit = ($item, item) ->\n  result = parse item.text\n  $item.append \"\"\"\n    #{embed result}\n    <br>\n    <i>#{wiki.resolveLinks(result.caption || \"(no caption)\")}</i>\n  \"\"\"\n\nbind = ($item, item) ->\n  $item.dblclick -> wiki.textEditor $item, item\n\nif window?\n  UrlAdapter = URL\nif module?\n  UrlAdapter = require('url').URL\nwindow.plugins.video = {emit, bind, UrlAdapter} if window?\nmodule.exports = {parse, embed, UrlAdapter} if module?\n"
  ],
  "sourceRoot": ""
}