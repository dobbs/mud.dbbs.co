{
  "version": 3,
  "sources": [
    "calculator.coffee"
  ],
  "names": [],
  "mappings": ";;AAKG,CAAA,YAAA;AAAA;;;;;;AAAA,MAAA,SAAA;AAEH,EAAA,MAAM,CAAC,OAAP,CAAA,UAAA,GACE;AAAA,IAAA,IAAA,EAAM,cAAA,GAAA,EAAA,IAAA,EAAA;AACR,UAAA,KAAA,EAAA,GAAA,EAAA,IAAA;;AAAI,MAAA,IAAI,CAAJ,IAAA,GAAA,YAAA;;AAAa,QAAA,OAAA,GAAA,EAAA;;AAAA,aAAA,KAAA,IAAA,IAAA,CAAA,OAAA,EAAA,EAAA;uBAAA,K;AAAA;;;OAAb,EAAA;;AACA,MAAA,IAAI,CAAJ,GAAA,CAAA,YAAA,EAAA,IAAA;AACA,MAAA,IAAA,GAAO,SAAA,CAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA,CAAP;AACA,MAAA,GAAA,GAAM,CAAA,CAAA,iCAAA,CAAA,CAAA,IAAA,CAAA,IAAA,CAAN;aACA,GAAG,CAAH,MAAA,CAAA,GAAA,C;AALF,KAAA;AAMA,IAAA,IAAA,EAAM,cAAA,GAAA,EAAA,IAAA,EAAA;aACJ,GAAG,CAAH,QAAA,CAAa,YAAA;eAAG,IAAI,CAAJ,UAAA,CAAA,GAAA,EAAA,IAAA,C;AAAhB,OAAA,C;AADI;AANN,GADF;;AAUA,EAAA,SAAA,GAAY,mBAAA,IAAA,EAAA;AACZ,QAAA,GAAA,EAAA,CAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAAA,OAAA,EAAA,GAAA;AAAE,IAAA,GAAA,GAAM,CAAN;AACA,IAAA,GAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AAAA,IAAA,OAAA,GAAA,EAAA;;AAAA,SAAA,CAAA,GAAA,CAAA,EAAA,GAAA,GAAA,GAAA,CAAA,MAAA,EAAA,CAAA,GAAA,GAAA,EAAA,CAAA,EAAA,EAAA;;AACE,MAAA,GAAA,GAAM,IAAI,CAAJ,KAAA,CAAA,KAAA,CAAN;AACA,MAAA,GAAG,CAAH,CAAG,CAAH,GAAS,GAAG,CAAA,CAAA,CAAH,CAAA,OAAA,CAAA,UAAA,EAA2B,UAAA,CAAA,EAAA;AAClC,YAAA,EAAsC,IAAA,CAAA,IAAA,CAAA,CAAA,KAAA,IAAA,IAAiB,CAAA,KAAvD,KAAA,CAAA,EAAA;AAAA,qBAAsB,CAAA,GAAA,EAAtB,CAAsB,CAAtB;AAAC,UAAA,IAAI,CAAC,IAAL,CAAD,CAAC,CAAD;AAAA,UAAA,GAAA;;;eACA,IAAI,CAAC,IAAL,CAAS,CAAT,EAAA,OAAA,CAAA,CAAA,C;AAFO,OAAA,CAAT;AAGA,MAAA,GAAG,CAAH,CAAG,CAAH,GAAS,GAAG,CAAA,CAAA,CAAH,CAAA,OAAA,CAAA,eAAA,EAAgC,UAAA,CAAA,EAAA;AACvC,QAAA,GAAA,GAAM,GAAA,GAAA,YAAA;AAAM,kBAAO,GAAG,CAAV,CAAU,CAAV;AAAA,iBAAA,IAAA;AAAA,iBAAA,IAAA;qBACW,CAAA,GAAE,CAAC,C;;AADd,iBAAA,GAAA;qBAEI,CAAA,GAAE,GAAG,CAAA,CAAA,C;;AAFT,iBAAA,GAAA;qBAGI,CAAA,GAAE,GAAG,CAAA,CAAA,C;;AAHT;qBAIL,CAAA,GAAE,C;AAJG;SAAN,EAAN;;eAKA,CAAC,CAAA,GAAD,CAAA,EAAA,OAAA,CAAA,CAAA,C;AANO,OAAA,CAAT;;AAOA,UAAW,IAAI,CAAJ,KAAA,CAAX,OAAW,CAAX,EAAA;AAAA,QAAA,GAAA,GAAA,CAAA;;;mBACA,GAAG,CAAH,IAAA,CAAA,GAAA,C;AAbF;;;AAFU,GAAZ;CAZG,E,IAAA",
  "sourcesContent": [
    "###\n * Federated Wiki : Calculator Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-calculator/blob/master/LICENSE.txt\n###\n\nwindow.plugins.calculator =\n  emit: (div, item) ->\n    item.data = (field for field of wiki.getData())\n    wiki.log 'calculator', item\n    text = calculate(item).join \"\\n\"\n    pre = $('<pre style=\"font-size: 16px;\"/>').text text\n    div.append pre\n  bind: (div, item) ->\n    div.dblclick -> wiki.textEditor div, item\n\ncalculate = (item) ->\n  sum = 0\n  for line in item.text.split \"\\n\"\n    col = line.split /\\s+/\n    col[0] = col[0].replace /^[A-Z]+$/, (x) ->\n      [item.data[x], sum] = [sum, 0] unless item.data[x]? && x != 'SUM'\n      item.data[x].toFixed 2\n    col[0] = col[0].replace /^\\-?[0-9\\.]+$/, (x) ->\n      sum = sum + switch col[1]\n        when 'CR', 'DB' then x/-1\n        when '*' then x*col[2]\n        when '/' then x/col[2]\n        else x/1\n      (x/1).toFixed 2\n    sum = 0 if line.match /^\\s*$/\n    col.join ' '\n"
  ],
  "sourceRoot": ""
}