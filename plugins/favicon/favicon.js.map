{
  "version": 3,
  "sources": [
    "favicon.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "###\n * Federated Wiki : Favicon Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-favicon/blob/master/LICENSE.txt\n###\n\n# ** favicon.coffee **\n# This is a brute force port of Ward's favicon.rb,\n# and could do with some refactoring by someone\n# who knows the canvas api, but it would be better\n# to move favicon generation to the client side.  This\n# could serve as a basis for that with enough refactoring.\n\n# Utility functions\nhsltorgb = (h, s, l) ->\n  h = (h % 360) / 360\n  m2 = l * (s + 1)\n  m1 = ((l * 2) - m2)\n  hue = (num) ->\n    if num < 0\n      num += 1\n    else if num > 1\n      num -= 1\n    if (num * 6) < 1\n      m1 + (m2 - m1) * num * 6\n    else if (num * 2) < 1\n      m2\n    else if (num * 3) < 2\n      m1 + (m2 - m1) * (2/3 - num) * 6\n    else\n      m1\n  [(hue(h+1/3)*255), (hue(h) * 255), (hue(h - 1/3) * 255)]\n\n\n\nwindow.plugins.favicon =\n  create: ->\n    $('body').append(\n      $('<canvas />').attr('width', 32).attr('height', 32).attr('id', 'favmaker').attr('display', 'none').hide()\n    )\n    canvas = document.getElementById('favmaker')\n    ctx = canvas.getContext('2d')\n    light = hsltorgb(Math.random() * 360, .78, .50)\n    dark = hsltorgb(Math.random() * 360, .78, .25)\n    angle = 2 * (Math.random() - 0.5)\n    sin = Math.sin angle\n    cos = Math.cos angle\n    scale = (Math.abs(sin) + Math.abs(cos))\n    colprep = (col, p) ->\n      Math.floor(light[col]*p + dark[col]*(1-p))%255\n    for x in [0..31]\n      for y in [0..31]\n        p = if sin >= 0 then sin * x + cos * y else -sin * (31 - x) + cos * y\n        p = p / 31 / scale\n        ctx.fillStyle = \"rgba(#{colprep(0, p)}, #{colprep(1, p)}, #{colprep(2, p)}, 1)\"\n        ctx.fillRect(x, y, 1, 1)\n    fav = canvas.toDataURL()\n    $('#favicon').attr('href', fav)\n    $('.favicon').attr('src', fav)\n    $.post('/favicon.png', {image: fav}, (data) ->\n      console.log data\n    )\n"
  ],
  "sourceRoot": ""
}