{
  "version": 3,
  "sources": [
    "force.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "###\n * Federated Wiki : Force Plugin\n *\n * Licensed under the MIT license.\n * https://github.com/fedwiki/wiki-plugin-force/blob/master/LICENSE.txt\n###\n\nwindow.plugins.force =\n  bind: (div, item) ->\n  emit: (div, item) ->\n    wiki.getScript '/js/d3/d3.min.js', ->\n      div.append \"\"\"\n        <style type=\"text/css\">\n          circle.node {\n            stroke: #fff;\n            stroke-width: 1.5px;\n          }\n\n          line.link {\n            stroke: #999;\n            stroke-opacity: .6;\n          }\n        </style>\n      \"\"\"\n      w = 380\n      h = 230\n\n      candidates = $(\".item:lt(#{$('.item').index(div)})\")\n      if (who = candidates.filter \".force-source:last\").size()\n        data = who.get(0).forceData()\n      else\n        data = wiki.getData()\n\n      json = $.extend true, {}, data\n      console.log json\n\n      fill = d3.scale.category20()\n\n      vis = d3.select(div.get(0))\n        .append(\"svg:svg\")\n        .attr(\"width\", w)\n        .attr(\"height\", h)\n\n      vis.append(\"svg:defs\").selectAll(\"marker\")\n        .data([\"arrowhead\"])\n        .enter()\n        .append(\"svg:marker\")\n        .attr(\"id\", String)\n        .attr(\"viewBox\",\"0 0 10 10\")\n        .attr(\"refX\",\"20\")\n        .attr(\"refY\",\"5\")\n        .attr(\"markerUnits\",\"strokeWidth\")\n        .attr(\"markerWidth\",\"9\")\n        .attr(\"markerHeight\",\"5\")\n        .attr(\"orient\",\"auto\")\n        .append(\"svg:path\")\n        .attr(\"d\",\"M 0 0 L 10 5 L 0 10 z\")\n        .attr(\"fill\", \"#BBBBBB\")\n\n      force = d3.layout.force()\n        .charge(-120)\n        .linkDistance(30)\n        .nodes(json.nodes)\n        .links(json.links)\n        .size([ w, h ])\n        .start()\n\n      link = vis.selectAll(\"line.link\")\n        .data(json.links)\n        .enter()\n        .append(\"svg:line\")\n        .attr(\"class\", \"link\")\n        .style(\"stroke-width\", (d) -> Math.sqrt d.value)\n        .attr(\"x1\", (d) -> d.source.x)\n        .attr(\"y1\", (d) -> d.source.y)\n        .attr(\"x2\", (d) -> d.target.x)\n        .attr(\"y2\", (d) -> d.target.y)\n        .attr(\"marker-end\", \"url(#arrowhead)\")\n\n      node = vis.selectAll(\"circle.node\")\n        .data(json.nodes)\n        .enter()\n        .append(\"svg:circle\")\n        .attr(\"class\", \"node\")\n        .attr(\"cx\", (d) -> d.x)\n        .attr(\"cy\", (d) -> d.y)\n        .attr(\"r\", 5)\n        .style(\"fill\", (d) -> fill d.group)\n        .on(\"dblclick\", (d) ->\n          wiki.doInternalLink d.name, div.parents('.page'))\n        .call(force.drag)\n      node.append(\"svg:title\").text((d, i) -> d.name)\n\n      vis\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(1000)\n        .style(\"opacity\", 1)\n\n      force.on \"tick\", ->\n        link\n          .attr(\"x1\", (d) -> d.source.x)\n          .attr(\"y1\", (d) -> d.source.y)\n          .attr(\"x2\", (d) -> d.target.x)\n          .attr(\"y2\", (d) -> d.target.y)\n        node\n          .attr(\"cx\", (d) -> d.x)\n          .attr(\"cy\", (d) -> d.y)\n"
  ],
  "sourceRoot": ""
}